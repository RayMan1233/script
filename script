-- // Constants \\ --
-- [ Services ] --
local Services = setmetatable({}, {__index = function(Self, Index)
	local NewService = game.GetService(game, Index)
	if NewService then
		Self[Index] = NewService
	end
	return NewService
end})

-- [ LocalPlayer ] --
local LocalPlayer = Services.Players.LocalPlayer

-- // Functions \\ --
local function PlayerAdded(Player)
	local Detected = false
	local Character;
	local PrimaryPart;

	local function CharacterAdded(NewCharacter)
		Character = NewCharacter
		repeat
			wait()
			PrimaryPart = NewCharacter:FindFirstChild("HumanoidRootPart")
		until PrimaryPart
		Detected = false
	end

	CharacterAdded(Player.Character or Player.CharacterAdded:Wait())
	Player.CharacterAdded:Connect(CharacterAdded)
	Services.RunService.Heartbeat:Connect(function()
		if (Character and Character:IsDescendantOf(workspace)) and (PrimaryPart and PrimaryPart:IsDescendantOf(Character)) then
			if PrimaryPart.AssemblyAngularVelocity.Magnitude > 50 or PrimaryPart.AssemblyLinearVelocity.Magnitude > 100 then
				if Detected == false then
					game.StarterGui:SetCore("ChatMakeSystemMessage", {
						Text = "Fall detected, Player: " .. tostring(Player);
						Color = Color3.fromRGB(255, 200, 0);
					})
				end
				Detected = true
				for i,v in ipairs(Character:GetDescendants()) do
					if v:IsA("BasePart") then
						v.CanCollide = false
						v.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
						v.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
						v.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0)
					end
				end
				PrimaryPart.CanCollide = false
				PrimaryPart.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
				PrimaryPart.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
				PrimaryPart.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0)
			end
		end
	end)
end

-- // Event Listeners \\ --
for i,v in ipairs(Services.Players:GetPlayers()) do
	if v ~= LocalPlayer then
		PlayerAdded(v)
	end
end
Services.Players.PlayerAdded:Connect(PlayerAdded)

local LastPosition = nil
Services.RunService.Heartbeat:Connect(function()
	pcall(function()
		local PrimaryPart = LocalPlayer.Character.PrimaryPart
		if PrimaryPart.AssemblyLinearVelocity.Magnitude > 250 or PrimaryPart.AssemblyAngularVelocity.Magnitude > 250 then
			PrimaryPart.AssemblyAngularVelocity = Vector3.new(0, 0, 0)
			PrimaryPart.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
			PrimaryPart.CFrame = LastPosition

			game.StarterGui:SetCore("ChatMakeSystemMessage", {
				Text = "You were flung. Neutralizing velocity.";
				Color = Color3.fromRGB(255, 0, 0);
			})
		elseif PrimaryPart.AssemblyLinearVelocity.Magnitude < 50 or PrimaryPart.AssemblyAngularVelocity.Magnitude > 50 then
			LastPosition = PrimaryPart.CFrame
		end
	end)
end)

-- Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/RayMan1233/library-UI/main/UI"))()

-- Create Window
local Window = Library:Create("CATHUB","GUI")

-- Tab
local Tab1 = Window:Tab("HOME",true)
local Tab2 = Window:Tab("script",true)
local Tab3 = Window:Tab("workspace",true)

Tab1:Label("main")

-- Button
Tab1:Button("headless",function()
   local lp = game:GetService "Players".LocalPlayer
if lp.Character:FindFirstChild "Head" then
    local char = lp.Character
    char.Archivable = true
    local new = char:Clone()
    new.Parent = workspace
    lp.Character = new
    wait(2)
    local oldhum = char:FindFirstChildWhichIsA "Humanoid"
    local newhum = oldhum:Clone()
    newhum.Parent = char
    newhum.RequiresNeck = false
    oldhum.Parent = nil
    wait(2)
    lp.Character = char
    new:Destroy()
    wait(1)
    newhum:GetPropertyChangedSignal("Health"):Connect(
        function()
            if newhum.Health <= 0 then
                oldhum.Parent = lp.Character
                wait(1)
                oldhum:Destroy()
            end
        end)
    workspace.CurrentCamera.CameraSubject = char
    if char:FindFirstChild "Animate" then
        char.Animate.Disabled = true
        wait(.1)
        char.Animate.Disabled = false
    end
    lp.Character:FindFirstChild "Head":Destroy()
end
end)

Tab1:Button("ESP",function()

 local function callback(Text)
 if Text == "Button1 text" then
  print ("Answer")
elseif Text == ("Button2 text") then
 print ("Answer2")
 end
end

local NotificationBindable = Instance.new("BindableFunction")
NotificationBindable.OnInvoke = callback
--
game.StarterGui:SetCore("SendNotification",  {
 Title = "install";
 Text = "ESP install player";
 Icon = "";
 Duration = 5;
 Button1 = "loading..";
 Button2 = "install";
 Callback = NotificationBindable;
})
    local function ESP()
for i,v in pairs(game.Players:GetChildren()) do
		if v ~= game.Players.LocalPlayer then
			if v.Character.Humanoid.RigType == "R6" then
				local ESP1 = Instance.new("BillboardGui", workspace.Camera)
				local ESP2 = Instance.new("Frame", ESP1)
				ESP1.AlwaysOnTop = true
				ESP1.Enabled = true
				ESP1.Size = UDim2.new(4.5,0,6,0)
				ESP1.Name = "ESP"
				ESP1.Adornee = v.Character.Torso
				ESP1.StudsOffset = Vector3.new(0, -0.6, 0)
					if v.Team ~= nil then	
						local function Traingle()
							if v.Team ~= game.Players.LocalPlayer.Team then
								ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
								ESP2.BackgroundTransparency = 0.75
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							else
								ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
								ESP2.BackgroundTransparency = 0.8
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							end
						end
						Traingle()
					else		
						wait(2)
						local function Traingle()
							if v.Team ~= game.Players.LocalPlayer.Team then
								ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
								ESP2.BackgroundTransparency = 0.75
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							else
								ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
								ESP2.BackgroundTransparency = 0.8
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							end
						end
						Traingle()
					end
			else
				local ESP1 = Instance.new("BillboardGui", workspace.Camera)
				local ESP2 = Instance.new("Frame", ESP1)
				ESP1.AlwaysOnTop = true
				ESP1.Enabled = true
				ESP1.Size = UDim2.new(4.5,0,6,0)
				ESP1.Name = "ESP"
				ESP1.Adornee = v.Character.UpperTorso
				ESP1.StudsOffset = Vector3.new(0, -0.6, 0)
					if v.Team ~= nil then	
						local function Traingle()
							if v.Team ~= game.Players.LocalPlayer.Team then
									ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
								ESP2.BackgroundTransparency = 0.75
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							else
								ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
								ESP2.BackgroundTransparency = 0.8
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							end
						end
						Traingle()
					else		
						wait(2)
						local function Traingle()
							if v.Team ~= game.Players.LocalPlayer.Team then
								ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
								ESP2.BackgroundTransparency = 0.75
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							else
								ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
								ESP2.BackgroundTransparency = 0.8
								ESP2.BorderColor3 = Color3.new(0,0,0)
								ESP2.BorderSizePixel = 2
								ESP2.Size = UDim2.new(1,0,1,0)
							end
						end
						Traingle()
					end
				end
			end
		end
end

ESP()

game.Players.PlayerAdded:connect(function(Player)
wait(2)
if Player ~= game.Players.LocalPlayer then	
	if Player.Character.Humanoid.RigType == "R6" then
		local ESP1 = Instance.new("BillboardGui", workspace.Camera)
		local ESP2 = Instance.new("Frame", ESP1)
		ESP1.AlwaysOnTop = true
		ESP1.Enabled = true
		ESP1.Size = UDim2.new(4.5,0,6,0)
		ESP1.Name = "ESP"
		ESP1.Adornee = Player.Character.Torso
		ESP1.StudsOffset = Vector3.new(0, -0.6, 0)
			if Player.Team ~= nil then	
				local function Traingle()
					if Player.Team ~= game.Players.LocalPlayer.Team then
						ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
						ESP2.BackgroundTransparency = 0.75
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					else
						ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
						ESP2.BackgroundTransparency = 0.8
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					end
				end
				Traingle()
			else		
				wait(2)
				local function Traingle()
				if Player.Team ~= game.Players.LocalPlayer.Team then
						ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
						ESP2.BackgroundTransparency = 0.75
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					else
						ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
						ESP2.BackgroundTransparency = 0.8
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					end
				end
				Traingle()
			end
	else
		local ESP1 = Instance.new("BillboardGui", workspace.Camera)
		local ESP2 = Instance.new("Frame", ESP1)
		ESP1.AlwaysOnTop = true
		ESP1.Enabled = true
		ESP1.Size = UDim2.new(4.5,0,6,0)
		ESP1.Name = "ESP"
		ESP1.Adornee = Player.Character.UpperTorso
		ESP1.StudsOffset = Vector3.new(0, -0.6, 0)
			if Player.Team ~= nil then	
				local function Traingle()
					if Player.Team ~= game.Players.LocalPlayer.Team then
						ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
						ESP2.BackgroundTransparency = 0.75
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					else
						ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
						ESP2.BackgroundTransparency = 0.8
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					end
				end
			Traingle()
		else		
			wait(2)
				local function Traingle()
					if Player.Team ~= game.Players.LocalPlayer.Team then
						ESP2.BackgroundColor3 = Color3.new(200, 0, 0)
						ESP2.BackgroundTransparency = 0.75
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					else
						ESP2.BackgroundColor3 = Color3.new(0, 0, 200)
						ESP2.BackgroundTransparency = 0.8
						ESP2.BorderColor3 = Color3.new(0,0,0)
						ESP2.BorderSizePixel = 2
						ESP2.Size = UDim2.new(1,0,1,0)
					end
				end
				Traingle()
			end
		end
	end
end)

function onKeyPress(actionName, userInputState, inputObject)
	if userInputState == Enum.UserInputState.Begin then
		local Resetting = Instance.new("Hint", game.Workspace)
		Resetting.Text = "Resetting"
		for i,v in pairs(game.Workspace.Camera:GetChildren()) do
			if v.Name == "ESP" then
				v:Destroy()
			end
		end
		wait()
		ESP()
		Resetting.Text = "Resetting Done"
		wait(2)
		Resetting:Destroy()
	end
end
 

end)

-- Textbot
Tab1:Textbox("Textbox","Enter Text",function(txt)
    game.Players.LocalPlayer.Humanoid.Walkspeed = txt
end)

-- A Keybind (For PC Only Use It In Mobile By Keyboard Script)
Tab1:Keybind("Keybind",Enum.KeyCode.F,function()
    print("Pressed key")
end)

-- Dropdown
Tab1:Dropdown("Dropdown",{"Option 1","Option 2","Option 3"},function(current)
    print(current)
end)

-- Toggle aka Switch
Tab1:Toggle("Toggle",function(x)
    print(x)
end)

-- Slider (Ill Not Suggest It For Mobile Cuz Its Bugs)
Tab1:Slider("Slider",16,500,function(s) -- Tab1:Slider("Yo", Minimum, Maximum, function(s)
    print(s)
end)

Tab3:Dropdown("safe zone",{"zone 1","zone 3 2","error"},function(current)
    print(current)
end)
